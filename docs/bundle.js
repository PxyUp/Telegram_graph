!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";!function(t){if(t&&"undefined"!=typeof window){var i=document.createElement("style");i.setAttribute("type","text/css"),i.innerHTML=t,document.head.appendChild(i)}}('.checkbox_container {\n  display: flex;\n  align-items: center;\n  border-radius: 20px;\n  background-color: white;\n  border: 1px solid #e7ecf0;\n  padding: 5px;\n}\n.checkbox_container:hover {\n  cursor: pointer;\n}\n.checkbox_container .round {\n  position: relative;\n  transition: background-color 0.2s ease-out;\n  border-radius: 50%;\n  cursor: pointer;\n  height: 14px;\n  width: 14px;\n  border: 1px solid transparent;\n  opacity: 1;\n}\n.checkbox_container .round::after {\n  opacity: 1 !important;\n}\n.checkbox_container .round.not_active::after {\n  opacity: 0 !important;\n}\n.checkbox_container .round.not_active {\n  background-color: unset !important;\n}\n.checkbox_container .round::after {\n  border: 2px solid white;\n  border-top: none;\n  border-right: none;\n  content: "";\n  height: 3px;\n  left: 3px;\n  opacity: 0;\n  position: absolute;\n  top: 3px;\n  transform: rotate(-45deg);\n  width: 7px;\n  font-size: 5px;\n}\n.checkbox_container .label {\n  margin-left: 10px;\n}\n\n.pxyup_chart_container {\n  width: 100%;\n  background-color: white;\n  position: relative;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n}\n.pxyup_chart_container.animation path {\n  transition: d 0.15s;\n}\n.pxyup_chart_container .axis_labels {\n  user-select: none;\n  font-size: 13px;\n  position: absolute;\n  left: 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.pxyup_chart_container .axis_labels div {\n  color: #96a2aa;\n}\n.pxyup_chart_container .preview_container {\n  margin-top: 10px;\n  position: relative;\n  overflow: hidden;\n}\n.pxyup_chart_container .preview_container .preview_controls {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  top: 0;\n  height: 100%;\n}\n.pxyup_chart_container .preview_container .preview_controls .control {\n  will-change: transform;\n  height: 100%;\n  position: absolute;\n}\n.pxyup_chart_container .preview_container .preview_controls .control.left:hover, .pxyup_chart_container .preview_container .preview_controls .control.right:hover {\n  cursor: pointer;\n}\n.pxyup_chart_container .preview_container .preview_controls .control.left {\n  width: 100%;\n  background-color: rgba(245, 249, 251, 0.8);\n}\n.pxyup_chart_container .preview_container .preview_controls .control.left .resize {\n  right: -5px;\n}\n.pxyup_chart_container .preview_container .preview_controls .control.right {\n  background-color: rgba(245, 249, 251, 0.8);\n  width: 100%;\n}\n.pxyup_chart_container .preview_container .preview_controls .control.right .resize {\n  left: -5px;\n}\n.pxyup_chart_container .preview_container .preview_controls .control.center {\n  z-index: 3;\n  border-top: 1px solid rgba(221, 234, 243, 0.7);\n  border-bottom: 1px solid rgba(221, 234, 243, 0.7);\n  height: calc(100% - 2px);\n}\n.pxyup_chart_container .preview_container .preview_controls .control.center:hover {\n  cursor: grab;\n}\n.pxyup_chart_container .preview_container .preview_controls .control.center:active, .pxyup_chart_container .preview_container .preview_controls .control.center:focus {\n  cursor: grabbing;\n}\n.pxyup_chart_container .preview_container .preview_controls .control .resize {\n  z-index: 2;\n  top: 0;\n  position: absolute;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 20px;\n}\n.pxyup_chart_container .preview_container .preview_controls .control .resize:hover, .pxyup_chart_container .preview_container .preview_controls .control .resize:active, .pxyup_chart_container .preview_container .preview_controls .control .resize:focus {\n  cursor: col-resize;\n}\n.pxyup_chart_container .preview_container .preview_controls .control .resize .caret {\n  background-color: rgba(221, 234, 243, 0.7);\n  width: 10px;\n  height: 100%;\n}\n.pxyup_chart_container .controls {\n  margin-top: 8px;\n  display: flex;\n  min-height: 40px;\n  align-items: center;\n  justify-content: space-around;\n  flex-wrap: wrap;\n}\n.pxyup_chart_container .night_mode_control {\n  margin-top: 10px;\n}\n.pxyup_chart_container .night_mode_control a {\n  font-size: 20px;\n  user-select: none;\n  color: #55abeb;\n}\n.pxyup_chart_container .night_mode_control a:hover {\n  cursor: pointer;\n}\n.pxyup_chart_container .tooltip {\n  display: none;\n  position: absolute;\n  z-index: 10;\n  background-color: white;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  min-width: 90px;\n  padding: 8px;\n  align-items: center;\n  justify-items: center;\n  flex-direction: column;\n}\n.pxyup_chart_container .tooltip .items {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.pxyup_chart_container .tooltip .items > div {\n  display: flex;\n  margin-left: 8px;\n  margin-right: 8px;\n  flex-direction: column;\n}\n.pxyup_chart_container .tooltip .items > div span.value {\n  font-size: 16px;\n  font-weight: bold;\n}\n.pxyup_chart_container .tooltip .items > div span.item {\n  font-size: 14px;\n}\n.pxyup_chart_container svg {\n  display: block;\n  position: relative;\n}\n.pxyup_chart_container svg circle {\n  fill: white;\n  stroke-width: 2;\n}\n.pxyup_chart_container line {\n  stroke: #f2f4f5;\n}\n.pxyup_chart_container line.verticle {\n  transform: translateX(-50px);\n  will-change: transform;\n  stroke-width: 2;\n}\n.pxyup_chart_container svg {\n  user-select: none;\n}\n.pxyup_chart_container svg.main_chart path:hover {\n  stroke-width: 3;\n}\n.pxyup_chart_container path {\n  stroke-width: 2;\n}\n.pxyup_chart_container text {\n  font-size: 12px;\n  z-index: 1;\n  background-color: white;\n  font-family: sans-serif;\n  text-shadow: 1px 0.5px white;\n}\n.pxyup_chart_container text.text_step {\n  fill: #96a2aa;\n}\n.pxyup_chart_container.night {\n  background-color: #26303d;\n}\n.pxyup_chart_container.night .axis_labels div {\n  color: #546778;\n}\n.pxyup_chart_container.night .checkbox_container {\n  background-color: #26303d;\n  border-color: #374656;\n}\n.pxyup_chart_container.night .checkbox_container .round.not_active {\n  background-color: unset !important;\n}\n.pxyup_chart_container.night .checkbox_container .label {\n  color: white;\n}\n.pxyup_chart_container.night .tooltip {\n  background-color: #273340;\n}\n.pxyup_chart_container.night .tooltip p {\n  color: white;\n}\n.pxyup_chart_container.night line {\n  stroke: #293544;\n}\n.pxyup_chart_container.night .preview_controls .control.left, .pxyup_chart_container.night .preview_controls .control.right {\n  background-color: rgba(31, 42, 56, 0.8);\n}\n.pxyup_chart_container.night text {\n  text-shadow: 1px 0.5px #242f3e;\n}\n.pxyup_chart_container.night text.text_step {\n  fill: #546778;\n}\n\nbody {\n  margin: 64px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n}');const t={long:{},short:{}},i={},e=!!window.Intl,n=e&&new Intl.DateTimeFormat("en-US",{weekday:"short",month:"short",day:"numeric"}),s=e&&new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"});function o(t,i){const e=Object.keys(i).reduce((t,e)=>t+`${e}: ${i[e]};`,"");t.style.cssText=e}function r(t,i){return t&&t.size?{height:t.size.height,width:t.size.width}:i}function a(t,i){return t-i}function h(t){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.reduce((t,i)=>(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i),t),i)}const c=(()=>e?(i,e=!1)=>e?(t.long[i]||(t.long[i]=n.format(i)),t.long[i]):(t.short[i]||(t.short[i]=s.format(i)),t.short[i]):(t,e=!1)=>(i[t]||(i[t]=new Date(t)),i[t].toLocaleString("en-us",{weekday:e?"short":void 0,month:"short",day:"numeric"})))();function l(t,i=!1){return c(t,i)}function d(t){return t.reduce((t,i,e)=>0===e?t+`M ${i.x} ${i.y}`:t+` L ${i.x} ${i.y}`,"")}function p(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function u(t,i){Object.keys(i).forEach(e=>{Array.isArray(i[e])?i[e].forEach(i=>{t.addEventListener(e,i)}):t.addEventListener(e,i[e])})}function m(t,i){Object.keys(i).forEach(e=>{Array.isArray(i[e])?i[e].forEach(i=>{t.removeEventListener(e,i)}):t.removeEventListener(e,i[e])})}function x(t,i){Object.keys(i).forEach(e=>{t.setAttribute(e,i[e])})}function g(t,i,e,n,s){return 1===s?i+(t-i-e)/2:i+(t-i-e)/(s-1)*n}function v(t,i,e,n,s,o){return o===n?i:o===s?t-e:s===n?t-e-(t-i-e)/2:t-e-(o-s)/(n-s)*(t-i-e)}function _(t,i,e,n,s){return t<=e?0:t>=i-n?s-1:Math.min(s-1,Math.round((t-e)/(i-e-n)*(s-1)))}var w;!function(t){t.Line="line",t.X="x"}(w||(w={}));const f=5,E=90,y=6,C=30,b=30,S=10,L=10,I=10,A=5,R=5,T=C+b,k=10,P=19,z=5.5,M=6,N="line_step",V="text_step";class F{constructor(t,i,e,n,s,r,h,c,l,d,p,u,m,x,g,v,w,f){this.id=t,this.node=i,this.charts_svg=e,this.preview_svg=n,this.toolTip=s,this.toolTipDate=r,this.controlsContainer=h,this.nightModeControl=c,this.axisContainer=l,this.leftPreviewControl=d,this.rightPreviewControl=p,this.centerPreviewControl=u,this.leftResizeControl=m,this.rightResizeControl=x,this.previewControlContainer=g,this.verticleLine=v,this.dataset=w,this.options=f,this.isDragActive=!1,this.isResizeActive=!1,this.activeResize=null,this.resizeAnimationFrame=null,this.dragAnimationFrame=null,this.mouseMoveAnimationFrame=null,this.toggleColumnAnimationFrame=null,this.night_mod=!1,this.sliceStartIndex=0,this.sliceEndIndex=0,this.currentSlicePoint={},this.columnsVisible={},this.columnDatasets={},this.animationTimer=null,this.doPreventDefault=(t=>{t.stopPropagation()}),this.onNightModeClick=(()=>{this.toggleNightMode()}),this.onCheckBoxClick=(t=>{this.toggleColumnAnimationFrame&&cancelAnimationFrame(this.toggleColumnAnimationFrame),this.toggleColumnAnimationFrame=requestAnimationFrame(()=>{this.removePoints();let i=t.target,e=i.dataset.key;for(;!e||i===document.body;)e=(i=i.parentNode).dataset.key;e&&this.toggleColumnVisible(e,i)})}),this.onMouseUp=(t=>{this.isResizeActive=!1,this.isDragActive=!1,this.activeResize=null}),this.onResizeStartRight=(t=>{t.stopPropagation(),this.isDragActive=!1,this.hideHoverLineAndPoints(),this.isResizeActive=!0,this.activeResize=!0}),this.onResizeStartLeft=(t=>{t.stopPropagation(),this.isDragActive=!1,this.hideHoverLineAndPoints(),this.isResizeActive=!0,this.activeResize=!1}),this.stopProp=(t=>{t.stopPropagation()}),this.onResizeEndLeft=(()=>{this.isResizeActive=!1,this.activeResize=null}),this.onResizeEndRight=(()=>{this.isResizeActive=!1,this.activeResize=null}),this.onResize=(t=>{t.preventDefault(),this.isResizeActive&&(this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame),this.resizeAnimationFrame=requestAnimationFrame(()=>this.doResize(this.activeResize,t)))}),this.onDragStart=(t=>{t.stopPropagation(),this.hideHoverLineAndPoints(),this.isDragActive=!0}),this.onDragEnd=(t=>{this.isDragActive=!1}),this.onDrag=(t=>{t.preventDefault(),this.isDragActive&&(this.dragAnimationFrame&&cancelAnimationFrame(this.dragAnimationFrame),this.dragAnimationFrame=requestAnimationFrame(()=>this.onPreviewControlClick(t)))}),this.onMouseLeave=(t=>{const i=a(t.clientY,this.positions.top);(t.toElement!==this.toolTip||i>=this.height-100||i<0)&&this.hideHoverLineAndPoints()}),this.onToolTipLeave=(()=>{this.hideHoverLineAndPoints()}),this.onPreviewControlClick=(t=>{const i=a(t.clientX||t.touches[0].clientX,this.positions.left),e=this.sliceEndIndex-this.sliceStartIndex,n=Math.floor(_(i,this.previewWidth,k,k,this.countElements)-e/2);this.sliceStartIndex=Math.max(n,0),this.sliceEndIndex=Math.min(this.sliceStartIndex+e,this.countElements-1),this.sliceEndIndex===this.countElements-1&&(this.sliceStartIndex=Math.max(0,this.sliceEndIndex-e)),0===this.sliceStartIndex&&(this.sliceEndIndex=Math.min(this.sliceStartIndex+e,this.countElements-1)),this.drawPreviewControls(),this.removeAxisXCharts(),this.draw()}),this.onMouseMove=(t=>{this.mouseMoveAnimationFrame&&cancelAnimationFrame(this.mouseMoveAnimationFrame),this.mouseMoveAnimationFrame=requestAnimationFrame(()=>{const i=t.offsetX,e=t.offsetY;if(i>b/2&&i<this.width-C/2&&e<this.height-I){o(this.verticleLine,{transform:`translateX(${i}px)`});const t=this.findClosesIndexOfPoint(i);if(null===t)return;const n=Object.keys(this.columnsVisible).filter(t=>this.columnsVisible[t]).map(i=>({key:i,color:this.dataset.colors[i],x:this.currentSlicePoint[i][t].x,y:this.currentSlicePoint[i][t].y,value:this.currentSlicePoint[i][t].value,date:this.currentSlicePoint[i][t].date}));this.showPoints(n),this.showTooltip(n,{x:i,y:e})}})}),this.preventDrag=(t=>(t.preventDefault(),!1)),this.onMouseEnterPreview=(()=>{this.mouseMoveAnimationFrame&&cancelAnimationFrame(this.mouseMoveAnimationFrame)}),this.SVG_CHARTS_LISTENERS={mouseleave:this.onMouseLeave,mousemove:this.onMouseMove},this.CENTRAL_CONTROL_LISTENERS={mousedown:this.onDragStart,dragstart:this.preventDrag,mouseup:this.onDragEnd,touchstart:this.onDragStart,touchend:this.onDragEnd},this.PREVIEW_CHART_LISTENERS={mouseenter:this.onMouseEnterPreview,mousemove:[this.onDrag,this.onResize],touchmove:[this.onDrag,this.onResize]},this.DOCUMENT_LISTENERS={mouseup:this.onMouseUp},this.TOOLTIP_LISTENERS={mouseleave:this.onToolTipLeave},this.LEFT_RESIZE_CONTROL_LISTENERS={mouseup:this.onResizeEndLeft,dragstart:this.preventDrag,mousedown:this.onResizeStartLeft,touchend:this.onResizeEndLeft,touchstart:this.onResizeStartLeft,click:this.stopProp},this.RIGHT_RESIZE_CONTROL_LISTENERS={mouseup:this.onResizeEndRight,dragstart:this.preventDrag,mousedown:this.onResizeStartRight,touchend:this.onResizeEndRight,touchstart:this.onResizeStartRight,click:this.stopProp},this.height=+this.charts_svg.getAttribute("height"),this.width=+this.charts_svg.getAttribute("width"),this.toolTip.style.maxWidth=`${this.width-2*T}px`,Object.keys(this.dataset.names).forEach(t=>{this.columnsVisible[t]=!0}),this.dataset.columns.forEach(t=>{const i=t.shift();if(this.columnDatasets[i]=t,this.countElements||(this.countElements=this.columnDatasets[i].length),!this.sliceStartIndex){const t=Math.max(P,Math.floor(this.countElements/z));this.sliceStartIndex=Math.max(this.columnDatasets[i].length-t-1,0)}this.sliceEndIndex||(this.sliceEndIndex=this.columnDatasets[i].length-1)}),this.horizontSteps=f&&f.horizontSteps||y,this.addMouseListener(),f.withoutAxisLabel||o(this.axisContainer,{top:`${this.height-I}px`,width:`${this.width-(b+C)/2}px`,"padding-left":`${b/3*2}px`,"padding-right":`${C/2}px`}),this.draw(),f.withoutPreview||(this.previewHeight=+this.preview_svg.getAttribute("height"),this.previewWidth=+this.preview_svg.getAttribute("width"),this.drawPreview(),this.drawPreviewControls(!0)),f.withoutControls||this.generateControls(),f.withoutNightMode||this.addNightModeListener()}addNightModeListener(){this.nightModeControl.addEventListener("click",this.onNightModeClick)}generateControls(){this.controlsContainer.style.width=`${this.width}px`,Object.keys(this.columnsVisible).forEach(t=>{const i=$({tag:"div",classList:["checkbox_container"],attrs:{"data-key":t},children:[{tag:"div",classList:["round"]},{tag:"div",classList:["label"],textValue:this.dataset.names[t]}]});this.controlsContainer.appendChild(i),i.addEventListener("click",this.onCheckBoxClick,!1),this.setColorCheckboxByKey(t,i)})}addMouseListener(){u(this.charts_svg,this.SVG_CHARTS_LISTENERS),u(document,this.DOCUMENT_LISTENERS),u(this.toolTip,this.TOOLTIP_LISTENERS)}destroy(t=!0){if(this.resetTimer(),m(this.charts_svg,this.SVG_CHARTS_LISTENERS),m(document,this.DOCUMENT_LISTENERS),m(this.toolTip,this.TOOLTIP_LISTENERS),!this.options.withoutControls)for(let t=0;t<this.controlsContainer.children.length;t++)this.controlsContainer.children[t].removeEventListener("click",this.onCheckBoxClick);this.options.withoutNightMode||this.nightModeControl.removeEventListener("click",this.onNightModeClick),this.options.withoutPreview||(m(this.centerPreviewControl,this.CENTRAL_CONTROL_LISTENERS),m(this.previewControlContainer,this.PREVIEW_CHART_LISTENERS),m(this.leftResizeControl,this.LEFT_RESIZE_CONTROL_LISTENERS),m(this.rightResizeControl,this.RIGHT_RESIZE_CONTROL_LISTENERS),m(this.leftPreviewControl,{click:this.onPreviewControlClick}),m(this.rightPreviewControl,{click:this.onPreviewControlClick})),t&&this.node.remove()}hideHoverLineAndPoints(){this.mouseMoveAnimationFrame&&cancelAnimationFrame(this.mouseMoveAnimationFrame),this.removePoints(),o(this.verticleLine,{transform:"translateX(-50px)"}),this.toolTip.style.display="none"}doResize(t,i){if(null===t)return;const e=_(a(i.clientX||i.touches[0].clientX,this.positions.left),this.previewWidth,k,k,this.countElements);t?(this.sliceEndIndex=e,this.sliceEndIndex<=this.sliceStartIndex&&(this.sliceEndIndex=this.sliceStartIndex+1)):(this.sliceStartIndex=e,this.sliceStartIndex>=this.sliceEndIndex&&(this.sliceStartIndex=this.sliceEndIndex-1)),this.drawPreviewControls(),this.removeAxisXCharts(),this.draw()}showPoints(t=[]){this.removePoints(),t.forEach(t=>{const i=O("circle",null,{cx:t.x,cy:t.y,stroke:t.color,r:f});this.charts_svg.appendChild(i)})}removePoints(){this.charts_svg.querySelectorAll("circle").forEach(t=>t.remove())}showTooltip(t,i){const e=i.x+b,n={display:"flex",right:"unset",left:`${e}px`,top:`${i.y+L}px`},s=this.toolTip.querySelector(".items");p(s),this.toolTipDate.textContent=l(t[0].date,!0),t.forEach(t=>s.appendChild($({tag:"div",attrs:{style:`color: ${t.color}`},children:[{tag:"span",classList:["value"],textValue:t.value},{tag:"span",classList:["item"],textValue:this.dataset.names[t.key]}]}))),e>this.width-E-C&&(n.right=`${Math.min(E,this.width-e+b+C)}px`,n.left="unset"),o(this.toolTip,n)}findClosesIndexOfPoint(t){const i=Object.keys(this.columnsVisible).filter(t=>this.columnsVisible[t]);return i.length?function(t,i){let e,n=0,s=t.length-1;for(;s-n>1;)if(i<t[e=Math.floor((n+s)/2)].x)s=e;else{if(!(i>t[e].x))return e;n=e}return i-t[n].x<=t[s].x-i?n:s}(this.currentSlicePoint[i[0]],t):null}removePathByKey(t){const i=document.getElementById(`pxyup_path_${this.id}_${t}`);i&&i.remove()}setColorCheckboxByKey(t,i){const e=this.dataset.colors[t],n=i.firstElementChild;this.columnsVisible[t]?(n.classList.remove("not_active"),o(n,{"border-color":e,"background-color":e})):n.classList.add("not_active")}toggleColumnVisible(t,i){this.columnsVisible[t]=!this.columnsVisible[t],this.setColorCheckboxByKey(t,i),this.columnsVisible[t]||this.removePathByKey(t),this.node.classList.add("animation"),this.options.withoutPreview||this.drawPreview(!1),this.refresh(!1,!1),this.animationTimer&&clearTimeout(this.animationTimer),this.animationTimer=window.setTimeout(()=>{this.node.classList.remove("animation")},150)}drawPreviewControls(t=!1){const i=(e=this.sliceStartIndex,n=this.previewWidth,s=k,r=k,a=this.countElements,-(n-e/(a-1)*(n-s-r)-r));var e,n,s,r,a;const h=function(t,i,e,n,s){return t/(s-1)*(i-e-n)+e}(this.sliceEndIndex,this.previewWidth,k,k,this.countElements);o(this.leftPreviewControl,{transform:`translateX(${i}px)`}),o(this.rightPreviewControl,{transform:`translateX(${h}px)`});const c=Math.ceil(Math.abs(Math.abs(this.previewWidth-h)-Math.abs(i)));o(this.centerPreviewControl,{width:`${c}px`,transform:`translateX(${Math.round(h-c)}px)`}),t&&(u(this.leftPreviewControl,{click:this.onPreviewControlClick}),u(this.rightPreviewControl,{click:this.onPreviewControlClick}),u(this.centerPreviewControl,this.CENTRAL_CONTROL_LISTENERS),u(this.previewControlContainer,this.PREVIEW_CHART_LISTENERS),u(this.leftResizeControl,this.LEFT_RESIZE_CONTROL_LISTENERS),u(this.rightResizeControl,this.RIGHT_RESIZE_CONTROL_LISTENERS))}draw(t=!0,i=!0){this.setSupportsLines(),this.drawCurrentSlice(t,i)}refresh(t=!0,i=!0){this.resetTimer(),this.draw(t,i)}drawAxisX(){p(this.axisContainer);const t=this.sliceEndIndex-this.sliceStartIndex+1;let i=Math.min(M,t+1);const e=i,n=t<=M+2?1:Math.max(t/(e-1),1);let s=this.sliceStartIndex;const o=t=>$({tag:"div",textValue:t});if(1==n)for(let t=this.sliceStartIndex;t<=this.sliceEndIndex;t++)this.axisContainer.appendChild(o(l(this.columnDatasets[w.X][t])));else{for(this.axisContainer.appendChild(o(l(this.columnDatasets[w.X][this.sliceStartIndex]))),s+=n;i-2>0&&s<this.sliceEndIndex-2;)this.axisContainer.appendChild(o(l(this.columnDatasets[w.X][Math.ceil(s)]))),i-=1,s+=n;this.axisContainer.appendChild(o(l(this.columnDatasets[w.X][this.sliceEndIndex])))}}resetTimer(){this.dragAnimationFrame&&(cancelAnimationFrame(this.dragAnimationFrame),this.dragAnimationFrame=null),this.resizeAnimationFrame&&(cancelAnimationFrame(this.resizeAnimationFrame),this.resizeAnimationFrame=null),this.mouseMoveAnimationFrame&&(cancelAnimationFrame(this.mouseMoveAnimationFrame),this.mouseMoveAnimationFrame=null),this.toggleColumnAnimationFrame&&(cancelAnimationFrame(this.toggleColumnAnimationFrame),this.toggleColumnAnimationFrame=null),this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}setRightIndexSlice(t){this.sliceStartIndex=t,this.refresh()}setLeftIndexSlice(t){this.sliceEndIndex=t,this.refresh()}removeAxisXCharts(){const t=this.charts_svg.querySelector("g.axis");t&&t.remove()}drawCurrentSlice(t=!0,i=!0){const e=this.minValue>=0?0:this.minValue,n=this.sliceEndIndex-this.sliceStartIndex+1;Object.keys(this.columnsVisible).forEach(t=>{if(this.columnsVisible[t]){const i=document.getElementById(`${`pxyup_path_${this.id}_${t}`}`);if(this.currentSlicePoint[t]=this.columnDatasets[t].slice(this.sliceStartIndex,this.sliceEndIndex+1).map((t,i)=>({x:g(this.width,b,C,i,n),y:v(this.height,L,I,this.maxValue,e,t),value:t,date:this.columnDatasets[w.X][this.sliceStartIndex+i]})),i)return void function(t,i){t.setAttribute("d",i)}(i,d(this.currentSlicePoint[t]));const s=O("path",[],{id:`pxyup_path_${this.id}_${t}`,stroke:this.dataset.colors[t],fill:"none",d:d(this.currentSlicePoint[t])});this.charts_svg.appendChild(s)}}),!this.options.withoutAxisLabel&&i&&this.drawAxisX()}drawPreview(t=!0){this.preview_svg.querySelectorAll("path").forEach(t=>t.remove());const i=[];Object.keys(this.columnsVisible).forEach(t=>{this.columnsVisible[t]&&i.push(...this.columnDatasets[t])});const e=h(i);this.minValueGlobal=e.min,this.maxValueGlobal=e.max,Object.keys(this.columnsVisible).forEach(t=>{if(this.columnsVisible[t]){const i=O("path",[],{id:`pxyup_path_preview_${this.id}_${t}`,d:d(this.columnDatasets[t].map((t,i)=>({x:g(this.previewWidth,S,S,i,this.countElements),y:v(this.previewHeight,A,R,this.maxValueGlobal,this.minValueGlobal,t)}))),stroke:this.dataset.colors[t],fill:"none"});this.preview_svg.prepend(i)}})}setSupportsLines(){const t=[];if(Object.keys(this.columnsVisible).forEach(i=>{this.columnsVisible[i]&&t.push(...this.columnDatasets[i].slice(this.sliceStartIndex,this.sliceEndIndex+1))}),0===t.length)return this.minValue=void 0,this.maxValue=void 0,void this.removeSteps();const i=h(t);if(this.minValue===i.min&&this.maxValue===i.max)return;this.minValue=i.min,this.maxValue=i.max;const e=0===t.length?0:Math.ceil((this.minValue>0?this.maxValue:this.maxValue-this.minValue)/this.horizontSteps),n=this.minValue>0?[0]:[this.minValue];for(let t=1;t<this.horizontSteps;t++)n.push(n[0]+e*t||t);this.drawSteps(n)}toggleNightMode(){this.night_mod=!this.night_mod,this.night_mod?(this.node.classList.add("night"),this.nightModeControl.textContent="Switch to day mode"):(this.node.classList.remove("night"),this.nightModeControl.textContent="Switch to night mode")}removeSteps(){const t=this.charts_svg.querySelector("g.steps");t&&t.remove()}drawSteps(t){this.removeSteps();const i=this.minValue>=0?0:this.minValue,e=[];t.forEach((t,n)=>{const s=0===n?this.height-I:v(this.height,L,I,this.maxValue,i,t),o=O("line",[N],{x1:0,x2:this.width,y1:s,y2:s}),r=O("text",[V],{x:0,y:s-5},[],t);e.push(o),e.push(r)});const n=O("g",["steps"],null,e);this.charts_svg.prepend(n)}getTranspilingDataset(){return this.columnDatasets}get positions(){return this._position||(this._position=this.charts_svg.getBoundingClientRect()),this._position}}let D=0;function O(t,i,e,n,s){const o=document.createElementNS("http://www.w3.org/2000/svg",t);return i&&i.forEach(t=>{o.classList.add(t)}),e&&x(o,e),n&&n.forEach(t=>{o.appendChild(t)}),void 0!==s&&(o.textContent=s),o}function $(t){if(t.skip)return null;const i="svg"===t.tag?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(t.tag);return t.textValue&&(i.textContent=t.textValue),t.classList&&t.classList.forEach(t=>{i.classList.add(t)}),t.attrs&&("svg"===t.tag?(Object.keys(t.attrs).forEach(e=>{i.setAttributeNS(null,e,t.attrs[e])}),i.setAttributeNS(null,"viewBox",`0 0 ${t.attrs.width} ${t.attrs.height}`)):x(i,t.attrs)),t.children&&t.children.forEach(t=>{if(!t)return;if(!t.tag)return void i.appendChild(t);const e=$(t);e&&i.appendChild(e)}),i}const j=(X=document.querySelector(".draw_engine"),(t,i={})=>{const e=r(i.chartsContainer,{width:"400",height:"400"}),n=O("line",["verticle"],{x1:0,x2:0,y1:0,y2:+e.height-10}),s=$({tag:"div",classList:["axis_labels"],skip:i.withoutAxisLabel}),o=$({tag:"svg",classList:["main_chart"],children:[n],attrs:Object.assign({},e)}),a=$({tag:"svg",skip:i.withoutPreview,classList:["chart_preview"],attrs:Object.assign({},r(i.previewContainer,{width:"400",height:"60"}))}),h=$({tag:"div",classList:["resize"],children:[$({tag:"div",classList:["caret"]})]}),c=$({tag:"div",classList:["resize"],children:[$({tag:"div",classList:["caret"]})]}),l=$({tag:"div",classList:["control","left"],children:[h]}),d=$({tag:"div",classList:["control","center"]}),p=$({tag:"div",classList:["control","right"],children:[c]}),u=$({tag:"div",classList:["preview_controls"],children:[l,d,p]}),m=$({tag:"div",skip:i.withoutPreview,classList:["preview_container"],children:[a,u]}),x=$({tag:"p",classList:["date"]}),g=$({tag:"div",classList:["tooltip"],children:[x,{tag:"div",classList:["items"]}]}),v=$({tag:"div",classList:["controls"],skip:i.withoutControls}),_=$({tag:"a",textValue:"Switch to Night mode"}),w=$({attrs:{id:`pxyup_chart_${D}`},classList:["pxyup_chart_container"],tag:"div",children:[o,s,m,g,v,{tag:"div",classList:["night_mode_control"],skip:i.withoutNightMode,children:[_]}]});return new F(D++,X.appendChild(w),o,a,g,x,v,_,s,l,p,d,h,c,u,n,t,i)});var X;fetch("./chart_data.json").then(t=>t.json()).then(t=>{t.forEach(t=>{j(t)})})});
//# sourceMappingURL=bundle.js.map
